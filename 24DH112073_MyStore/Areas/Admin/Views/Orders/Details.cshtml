@model _24DH112073_MyStore.Models.Order

@{
    ViewBag.Title = "Chi tiết đơn hàng #" + Model.OrderID;
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<h2 class="bg-success" style="padding: 10px; border-radius: 5px;">CHI TIẾT ĐƠN HÀNG</h2>

<div class="row" style="padding-top: 20px;">

    @* --- CỘT TRÁI: THÔNG TIN ĐƠN HÀNG --- *@
    <div class="col-md-6">
        <h4>THÔNG TIN ĐƠN HÀNG</h4>
        <br />

        <p>
            <strong>Ngày đặt hàng:</strong><br />
            @Model.OrderDate.ToString("dd/MM/yyyy HH:mm")
        </p>
        <p>
            <strong>Tên khách hàng:</strong><br />
            @Model.Customer.CustomerName
        </p>
        <p>
            <strong>Tổng giá trị:</strong><br />
            @Model.TotalAmount.ToString("N0") VNĐ
        </p>
        <p>
            <strong>Phương thức thanh toán:</strong><br />
            @Model.PaymentMethod
        </p>
        <p>
            <strong>Trạng thái thanh toán:</strong><br />
            @Model.PaymentStatus
        </p>
        <p>
            <strong>Phương thức giao hàng:</strong><br />
            @Model.DeliveryMethod
        </p>
        <p>
            <strong>Địa chỉ giao hàng:</strong><br />
            @Model.ShippingAddress
        </p>
    </div>

    @* --- CỘT PHẢI: SẢN PHẨM --- *@
    <div class="col-md-6">
        <h4>Sản phẩm</h4>
        <br />

        <table class="table">
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Số lượng</th>
                    <th>Đơn giá</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.OrderDetails)
                {
                    <tr>
                        <td style="display: flex; align-items: flex-start; gap: 10px;">

                            @* SỬA LỖI Ở ĐÂY: Thêm 'object-fit: contain;' *@
                            <img src="@Url.Content(item.Product.ProductImage)" alt="Ảnh"
                                 style="width: 120px;
                                        height: 120px;
                                        border: 1px solid #eee;
                                        flex-shrink: 0;
                                        object-fit: contain;" />

                            <span>
                                @item.Product.ProductName
                            </span>
                        </td>
                        <td>@item.Quantity</td>
                        <td>@item.UnitPrice.ToString("N0")</td>
                        <td>@((item.Quantity * item.UnitPrice).ToString("N0"))</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<p>
    @Html.ActionLink("Cập nhật trạng thái", "UpdateStatus", new { id = Model.OrderID }, new { @class = "btn btn-primary" })
    @Html.ActionLink("Quay lại danh sách", "Index", null, new { @class = "btn btn-primary" })
</p>