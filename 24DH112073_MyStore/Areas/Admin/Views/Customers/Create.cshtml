@* BƯỚC 1: Đổi model thành ViewModel *@
@model _24DH112073_MyStore.Models.ViewModel.CustomerViewModel

@{
    ViewBag.Title = "Thêm mới Khách hàng";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

@* Sửa tiêu đề cho giống slide 409 *@
<h2 class="bg-success" style="padding: 10px; border-radius: 5px;">QUẢN LÝ KHÁCH HÀNG</h2>

@* BƯỚC 2: Thêm thuộc tính enctype để upload file (giống slide 291-294) *@
@using (Html.BeginForm("Create", "Customers", FormMethod.Post,
                       new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Thêm mới khách hàng</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        @* Thêm trường "Mã khách hàng" (Username) - theo slide 409 *@
        <div class="form-group">
            @Html.LabelFor(model => model.Username, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Username, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Username, "", new { @class = "text-danger" })
            </div>
        </div>

        @* Thêm trường "Họ và tên" *@
        <div class="form-group">
            @Html.LabelFor(model => model.CustomerName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.CustomerName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CustomerName, "", new { @class = "text-danger" })
            </div>
        </div>

        @* Thêm trường "Mật khẩu" - theo slide 409 *@
        <div class="form-group">
            @Html.LabelFor(model => model.Password, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.PasswordFor(model => model.Password, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
            </div>
        </div>

        @* Thêm trường "Xác nhận mật khẩu" - theo slide 409 *@
        <div class="form-group">
            @Html.LabelFor(model => model.ConfirmPassword, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.PasswordFor(model => model.ConfirmPassword, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.ConfirmPassword, "", new { @class = "text-danger" })
            </div>
        </div>

        @* Thêm trường "Địa chỉ Email" *@
        <div class="form-group">
            @Html.LabelFor(model => model.CustomerEmail, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.CustomerEmail, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CustomerEmail, "", new { @class = "text-danger" })
            </div>
        </div>

        @* ===== BƯỚC SỬA LỖI: THÊM 2 TRƯỜNG BỊ THIẾU ===== *@
        <div class="form-group">
            @Html.LabelFor(model => model.CustomerPhone, "Số điện thoại", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.CustomerPhone, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CustomerPhone, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.CustomerAddress, "Địa chỉ", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.CustomerAddress, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CustomerAddress, "", new { @class = "text-danger" })
            </div>
        </div>
        @* ===== KẾT THÚC SỬA LỖI ===== *@


        @* BƯỚC 3: Thêm trường UPLOAD HÌNH ẢNH (giống slide 295-296) *@
        <div class="form-group">
            @Html.LabelFor(model => model.UploadImg, "Hình ảnh", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @* Đây là ô "Choose File" *@
                @Html.TextBoxFor(model => model.UploadImg, new { @type = "file" })
                @Html.ValidationMessageFor(model => model.UploadImg, "", new { @class = "text-danger" })
            </div>
        </div>

        @* Thêm trường "Vai trò" (RadioButton) - theo slide 409 *@
        <div class="form-group">
            @Html.LabelFor(model => model.UserRole, "Vai trò", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.RadioButtonFor(model => model.UserRole, "Customer", new { id = "role_kh", @checked = "checked" })
                <label for="role_kh">Khách hàng</label>

                @Html.RadioButtonFor(model => model.UserRole, "Admin", new { id = "role_nv" })
                <label for="role_nv">Nhân viên</label>
            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                @* Sửa nút "Create" *@
                <input type="submit" value="Thêm mới" class="btn btn-primary" />
            </div>
        </div>
    </div>
}

<div>
    @* Sửa link "Back to List" *@
    @Html.ActionLink("Quay lại danh sách", "Index", null, new { @class = "btn btn-default" })
</div>